{
    "version": 3,
    "sources": [
        "../../../src/common/bootstrap/global.js"
    ],
    "names": [
        "global",
        "in_array",
        "stringToSearch",
        "arrayToSearch",
        "s",
        "length",
        "thisEntry",
        "toString",
        "_ip2int",
        "ip",
        "num",
        "split",
        "Number",
        "_int2iP",
        "str",
        "tt",
        "Array",
        "String",
        "encryptPassword",
        "password",
        "md5encoded",
        "think",
        "md5",
        "Format",
        "date",
        "fmt",
        "Date",
        "o",
        "getMonth",
        "getDate",
        "getHours",
        "getMinutes",
        "getSeconds",
        "Math",
        "floor",
        "getMilliseconds",
        "test",
        "replace",
        "RegExp",
        "$1",
        "getFullYear",
        "substr",
        "k",
        "sortMenu",
        "menu",
        "pid",
        "m",
        "filter",
        "ele",
        "sort",
        "a",
        "b",
        "isEmpty",
        "i",
        "children",
        "id",
        "times",
        "d",
        "sec",
        "time",
        "y",
        "M",
        "h",
        "date_format",
        "queryURL",
        "method",
        "data",
        "url",
        "option",
        "request",
        "require",
        "time_query",
        "now",
        "console",
        "promise",
        "resolve",
        "reject",
        "extend",
        "post",
        "set",
        "send",
        "timeout",
        "end",
        "err",
        "res",
        "log",
        "env",
        "body",
        "get",
        "query",
        "timeEnd",
        "crypto",
        "Buffer",
        "md5sum",
        "createHash",
        "update",
        "digest",
        "sha1"
    ],
    "mappings": "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",
    "file": "../../../src/common/bootstrap/global.js",
    "sourcesContent": [
        "/**\n * this file will be loaded before server started\n * you can define global functions used in controllers, models, templates\n */\n\n/**\n * use global.xxx to define global functions\n * \n * global.fn1 = function(){\n *     \n * }\n */\n\n/**\n * in_array\n * @param stringToSearch\n * @param arrayToSearch\n * @returns {boolean}\n */\n/* global in_array */\nglobal.in_array = function (stringToSearch, arrayToSearch) {\n    for (var s = 0; s < arrayToSearch.length; s++) {\n        var thisEntry = arrayToSearch[s].toString();\n        if (thisEntry == stringToSearch) {\n            return true;\n        }\n    }\n    return false;\n};\n\n/**\n * ip转数字\n * @param ip\n * @returns {number}\n * @private\n */\n/* global _ip2int(ip)*/\nglobal._ip2int = function(ip) {\n    var num = 0;\n    ip = ip.split(\".\");\n    num = Number(ip[0]) * 256 * 256 * 256 + Number(ip[1]) * 256 * 256 + Number(ip[2]) * 256 + Number(ip[3]);\n    num = num >>> 0;\n    return num;\n}\n/**\n * 数字转ip\n * @param num\n * @returns {string|*}\n * @private\n */\n/*global _int2ip(num: number) */\nglobal._int2iP = function(num) {\n    var str;\n    var tt = new Array();\n    tt[0] = (num >>> 24) >>> 0;\n    tt[1] = ((num << 8) >>> 24) >>> 0;\n    tt[2] = (num << 16) >>> 24;\n    tt[3] = (num << 24) >>> 24;\n    str = String(tt[0]) + \".\" + String(tt[1]) + \".\" + String(tt[2]) + \".\" + String(tt[3]);\n    return str;\n}\n\n/**\n * 密码加密\n * @param password 加密的密码\n * @param md5encoded true-密码不加密，默认加密\n * @returns {*}\n */\n/*global encryptPassword */\nglobal.encryptPassword = function(password, md5encoded) {\n    md5encoded = md5encoded || false;\n    password = md5encoded ? password : think.md5(password);\n    return think.md5(think.md5('THINKJS-RABC') + password + think.md5('DEVLIN'));\n}\n/**\n * @param date 要转化的时间\n * @param fmt 时间格式\n * @returns {*}\n */\nglobal.Format = function (date,fmt) { \n    var date = new Date(date);\n    var o = {\n        \"M+\": date.getMonth() + 1, //月份 \n        \"d+\": date.getDate(), //日 \n        \"h+\": date.getHours(), //小时 \n        \"m+\": date.getMinutes(), //分 \n        \"s+\": date.getSeconds(), //秒 \n        \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度 \n        \"S\": date.getMilliseconds() //毫秒 \n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n}\n/**\n * @param date 菜单对象\n * @param pid 父节点\n * @returns {*}\n */\nglobal.sortMenu = function(menu,pid){\n    let m = menu.filter(function(ele){\n        return ele.pid == pid;\n    })\n    m.sort(function(a,b){\n        return a.sort - b.sort;\n    })\n    if(!think.isEmpty(m)&&m.length>0){\n        for(let i=0;i<m.length;i++){\n            let children = menu.filter(function(ele){\n                return ele.pid == m[i].id;\n            })\n            children.sort(function(a,b){\n                return a.sort - b.sort;\n            })\n            m[i].children = children;\n        }\n    }\n    return m;\n    \n}\n\n/**\n * global times\n * 时间格式化\n * @param d\n * @returns {string}\n */\nglobal.times = function(d, sec) {\n    var time;\n    var date = new Date(d);\n    var y = date.getFullYear();\n    var M = date.getMonth() + 1;\n    M = M < 10 ? \"0\" + M : M;\n    var d = date.getDate();\n    d = d < 10 ? \"0\" + d : d;\n    var h = date.getHours();\n    h = h < 10 ? \"0\" + h : h;\n    var m = date.getMinutes();\n    m = m < 10 ? \"0\" + m : m;\n    var s = date.getSeconds();\n    s = s < 10 ? \"0\" + s : s;\n    if (sec) {\n        time = y + \"-\" + M + \"-\" + d + \" \" + h + \":\" + m + \":\" + s;\n    } else {\n        time = y + \"-\" + M + \"-\" + d + \" \" + h + \":\" + m;\n    }\n\n    return time;\n}\n/**\n * 时间格式化函数\n */\nglobal.date_format=function(d,fmt){\n    var o = {\n        \"M+\": d.getMonth() + 1, //月份 \n        \"d+\": d.getDate(), //日 \n        \"h+\": d.getHours(), //小时 \n        \"m+\": d.getMinutes(), //分 \n        \"s+\": d.getSeconds(), //秒 \n        \"q+\": Math.floor((d.getMonth() + 3) / 3), //季度 \n        \"S\": d.getMilliseconds() //毫秒 \n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (d.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n}\n\n/**\n * 发送http请求\n * @param {*} method 发送方法\n * @param {*} data   发送数据\n * @param {*} url    请求地址\n * @param {*} option 请求头信息\n */   \nglobal.queryURL = function (method,data,url,option){\n    let request = require(\"superagent\");//加载模块\n    let time_query = times(Date.now(),true);\n    console.time(\"[\"+time_query+\"] [Request Time] 接口请求时长\");\n    let promise = new Promise(function(resolve,reject){\n        if(method==\"post\"){\n            option = think.extend({'Content-Type':'application/x-www-form-urlencoded'},option);\n            request.post(url).set(option).send(data).timeout(10000).end(function(err,res){\n                if(!think.isEmpty(err)){\n                    think.log(\"请求接口失败 method:[\"+method+\"],option:[\"+JSON.stringify(option)+\"],data:[\"+JSON.stringify(data)+\"],url:[\"+url+\"],失败原因:\"+err,think.env);\n                    resolve(null);\n                    think.reject(err);\n                }\n                else{\n                    think.log(\"请求接口成功 method:[\"+method+\"],option:[\"+JSON.stringify(option)+\"],data:[\"+JSON.stringify(data)+\"],url:[\"+url+\"],接受数据:\"+JSON.stringify(res.body),think.env);\n                    resolve(res.body);\n                }\n            })  \n        }\n        else{\n            option = think.extend({},option);\n            request.get(url).set(option).query(data).timeout(10000).end(function(err,res){\n                if(!think.isEmpty(err)){\n                    think.log(\"请求接口失败 method:[\"+method+\"],option:[\"+JSON.stringify(option)+\"],data:[\"+JSON.stringify(data)+\"],url:[\"+url+\"],失败原因:\"+err,think.env);\n                    resolve(null);\n                    think.reject(err);\n                }\n                else{\n                   think.log(\"请求接口成功 method:[\"+method+\"],option:[\"+JSON.stringify(option)+\"],data:[\"+JSON.stringify(data)+\"],url:[\"+url+\"],接受数据:\"+JSON.stringify(res.body),think.env);\n                    resolve(res.body);\n                }\n            });\n        }\n    })\n    console.timeEnd(\"[\"+time_query+\"] [Request Time] 接口请求时长\");\n    return promise;\n}\n\n/**\n * md5 加密算法\n * @param {*} str 待加密的字符串\n */\nglobal.md5 =function(str){\n    let crypto = require('crypto');\n    str = new Buffer(str.toString('binary'));\n    var md5sum = crypto.createHash('md5');\n    md5sum.update(str);\n    str = md5sum.digest('hex');\n    return str;\n}\n/**\n * sha1 加密算法\n * @param {*} str 待加密的字符串\n */\nglobal.sha1 = function (str) {\n    str = new Buffer(str.toString('binary'));\n    var md5sum = crypto.createHash('sha1');\n    md5sum.update(str);\n    str = md5sum.digest('hex');\n    return str;\n};"
    ]
}